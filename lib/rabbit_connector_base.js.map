{"version":3,"sources":["rabbit_connector_base.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;2BACM,eAAe;;;;kCACJ,sBAAsB;;;;;;;;;IAK9C,mBAAmB;;;;;;;AAMZ,WANP,mBAAmB,GAMT;0BANV,mBAAmB;;AAOrB,QAAI,CAAC,OAAO,GAAG,yBAAO,KAAK,CAAC;AAC1B,SAAG,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI;KAC3B,CAAC,CAAC;GACJ;;;;;;;;eAVG,mBAAmB;;WAiBX,wBAAG;;;AACb,UAAI,CAAC,OAAO,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC;AAC3C,aAAO,gCAAkB,cAAc,EAAE,CACtC,IAAI,CAAC,UAAC,UAAU,EAAK;AACpB,cAAK,OAAO,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC;AACxD,eAAO,UAAU,CAAC,aAAa,EAAE,CAAC;OACnC,CAAC,CAAC,IAAI,CAAC,UAAC,OAAO,EAAK;AACnB,cAAK,OAAO,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;AACnC,cAAK,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;AACvC,eAAO,OAAO,CAAC;OAChB,CAAC,CAAC;KACN;;;SA5BG,mBAAmB;;;qBA+BV,mBAAmB","file":"rabbit_connector_base.js","sourcesContent":["'use strict';\nimport logger from '@hoist/logger';\nimport connectionManager from './connection_manager';\n/**\n * Base class for managing publising events to rabbit mq\n * manages connection lifecycle etc\n */\nclass RabbitConnectorBase {\n\n  /**\n   * instantiate a new instance\n   * @abstract\n   */\n  constructor() {\n    this._logger = logger.child({\n      cls: this.constructor.name\n    });\n  }\n\n  /**\n   * open up a new channel to rabbit or reuse an existing one\n   * @protected\n   * @returns {Promise}\n   */\n  _openChannel() {\n    this._logger.debug('creating new channel');\n    return connectionManager._getConnection()\n      .then((connection) => {\n        this._logger.info('got a connection, creating channel');\n        return connection.createChannel();\n      }).then((channel) => {\n        this._logger.debug('channel open');\n        this._logger.info('returning channel');\n        return channel;\n      });\n  }\n}\n\nexport default RabbitConnectorBase;\n"],"sourceRoot":"/source/"}